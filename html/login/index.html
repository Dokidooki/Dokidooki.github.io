<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="box">
        <h2>牛牛网</h2>
        <div class="input-box">
            <label>账号</label>
            <input id="username" type="text" />
        </div>
        <div class="input-box">
            <label>密码</label>
            <input id="password" type="password" />
        </div>
        <div class="btn-box">
            <a href="../../index.html">游客访问</a>
            <div>
                <button class="join">登录</button>
                <button class="zhuce">注册</button>
            </div>
        </div>
    </div>

    <!-- <script type="text/javascript"> -->
    <script src="../../jquery-3.4.1/jquery-3.4.1.min.js"></script>


    <script type="text/javascript">

        const join = document.querySelector('.join')

        join.addEventListener('click', function () {
            $.ajax({
                type: "POST",
                dataType: "JSON",
                url: 'http://localhost:9999/login',

                contentType: "application/json",
                data: JSON.stringify({
                    username: $("#username").val(),
                    password: $("#password").val()

                }),

                success: function (result) {


                    if (result == true) {
                        alert("登陆成功");
                        window.location.href = "../../index.html";
                    } else {
                        console.log(result)
                        alert("登录失败")
                    }
                }
            });
        }

        )
        const zhuce = document.querySelector('.zhuce')

        zhuce.addEventListener('click', function () {

            $.ajax({
                type: "POST",
                dataType: "JSON",
                url: 'http://localhost:9999/registry',

                contentType: "application/json",
                data: JSON.stringify({
                    username: $("#username").val(),
                    // nickname: $("#nickname").val(),
                    password: $("#password").val(),
                    // phone: $("#phone").val()

                }),

                success: function (result) {


                    if (result == true) {
                        alert("注册成功");
                        window.location.href = "../../index.html";
                    } else {
                        console.log(result)
                        alert("注册失败")
                    }
                }
            });
        })



    </script>

</body>

</html>